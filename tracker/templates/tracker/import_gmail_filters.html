{% extends "base.html" %}
{% block title %}Import Gmail Filters{% endblock %}
{% block content %}
<div class="main-content">
  <h1>Import Gmail Filters</h1>
  <form method="post" enctype="multipart/form-data" style="margin-bottom:1rem;">
    {% csrf_token %}
    <div style="margin-bottom:0.5rem;">
      <label for="filters_xml"><b>Gmail Filters XML (mailFilters.xml)</b></label>
      <input type="file" id="filters_xml" name="filters_xml" accept=".xml" required />
    </div>
    <div style="display:flex; gap:0.5rem;">
      <button class="button" type="submit" name="action" value="preview">Preview Diff</button>
      <button class="button" type="submit" name="action" value="apply" style="background:#059669;">Apply Changes</button>
    </div>
  </form>

  {% if error %}
    <div style="color:#b91c1c; font-weight:600;">{{ error }}</div>
  {% endif %}

  {% if preview %}
    <h2>Preview</h2>
    <pre style="background:#f3f4f6;padding:1em;border-radius:6px;max-height:500px;overflow:auto;">{{ preview }}</pre>
  {% endif %}

  {% if result %}
    <div style="color:#065f46; font-weight:600;">{{ result }}</div>
  {% endif %}
</div>
{% endblock %}
